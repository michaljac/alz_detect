ARG BASE_TAG=alzearly-base:py310
FROM ${BASE_TAG} As serve

COPY requirements-serve.txt .
RUN pip install --no-cache-dir --prefer-binary -r requirements-serve.txt

COPY . .
EXPOSE 8001
# USER app   # uncomment if you created a non-root user in base
CMD ["python", "run_serve.py", "--host", "0.0.0.0", "--port", "8001"]